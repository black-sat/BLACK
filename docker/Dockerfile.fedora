ARG VERSION
FROM fedora:$VERSION
RUN echo 'fastestmirror=1' >> /etc/dnf/dnf.conf
RUN dnf update -y
RUN dnf install -y make cmake gcc gcc-c++ git git-lfs
RUN dnf install -y fmt-devel catch-devel \
                   z3-devel cvc5-devel \
                   python3

RUN git clone https://github.com/arximboldi/immer.git
WORKDIR /immer/build
RUN cmake ..
RUN make install

ENTRYPOINT ["/usr/bin/env", "--"]
